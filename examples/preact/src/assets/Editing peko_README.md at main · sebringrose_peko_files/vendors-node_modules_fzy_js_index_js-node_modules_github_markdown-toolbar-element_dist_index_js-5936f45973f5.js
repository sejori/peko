"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["vendors-node_modules_fzy_js_index_js-node_modules_github_markdown-toolbar-element_dist_index_js"],{47142(a,b,c){c.d(b,{CD:()=>k,Gs:()=>i,m7:()=>j});var d=-1/0,e=1/0;function f(a){return a.toLowerCase()===a}function g(a){return a.toUpperCase()===a}function h(a,b,c,e){for(var h=a.length,i=b.length,j=a.toLowerCase(),k=b.toLowerCase(),l=function(a){for(var b=a.length,c=Array(b),d="/",e=0;e<b;e++){var h=a[e];"/"===d?c[e]=.9:"-"===d||"_"===d||" "===d?c[e]=.8:"."===d?c[e]=.6:f(d)&&g(h)?c[e]=.7:c[e]=0,d=h}return c}(b,l),m=0;m<h;m++){c[m]=Array(i),e[m]=Array(i);for(var n=d,o=m===h-1?-0.005:-0.01,p=0;p<i;p++)if(j[m]===k[p]){var q=d;m?p&&(q=Math.max(e[m-1][p-1]+l[p],c[m-1][p-1]+1)):q=-0.005*p+l[p],c[m][p]=q,e[m][p]=n=Math.max(q,n+o)}else c[m][p]=d,e[m][p]=n+=o}}function i(a,b){var c=a.length,f=b.length;if(!c||!f)return d;if(c===f)return e;if(f>1024)return d;var g=Array(c),i=Array(c);return h(a,b,g,i),i[c-1][f-1]}function j(a,b){var c=a.length,e=b.length,f=Array(c);if(!c||!e)return f;if(c===e){for(var g=0;g<c;g++)f[g]=g;return f}if(e>1024)return f;var i=Array(c),j=Array(c);h(a,b,i,j);for(var k=!1,g=c-1,l=e-1;g>=0;g--)for(;l>=0;l--)if(i[g][l]!==d&&(k||i[g][l]===j[g][l])){k=g&&l&&j[g][l]===i[g-1][l-1]+1,f[g]=l--;break}return f}function k(a,b){a=a.toLowerCase(),b=b.toLowerCase();for(var c=a.length,d=0,e=0;d<c;d+=1)if(0===(e=b.indexOf(a[d],e)+1))return!1;return!0}},51941(a,b,c){c.r(b),c.d(b,{default:()=>q});let d=["[data-md-button]","md-header","md-bold","md-italic","md-quote","md-code","md-link","md-image","md-unordered-list","md-ordered-list","md-task-list","md-mention","md-ref","md-strikethrough"];function e(a){let b=[];for(let c of a.querySelectorAll(d.join(", ")))c.hidden||c.offsetWidth<=0&&c.offsetHeight<=0||c.closest("markdown-toolbar")!==a||b.push(c);return b}let f=new WeakMap;class MarkdownButtonElement extends HTMLElement{constructor(){var a;super();let b=()=>{let a=f.get(this);a&&p(this,a)};this.addEventListener("keydown",(a=b,function(b){(" "===b.key||"Enter"===b.key)&&(b.preventDefault(),a(b))})),this.addEventListener("click",b)}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","button")}click(){let a=f.get(this);a&&p(this,a)}}class MarkdownHeaderButtonElement extends MarkdownButtonElement{constructor(){super();let a=parseInt(this.getAttribute("level")||"3",10);if(a<1||a>6)return;let b=`${"#".repeat(a)} `;f.set(this,{prefix:b})}}window.customElements.get("md-header")||(window.MarkdownHeaderButtonElement=MarkdownHeaderButtonElement,window.customElements.define("md-header",MarkdownHeaderButtonElement));class MarkdownBoldButtonElement extends MarkdownButtonElement{constructor(){super(),f.set(this,{prefix:"**",suffix:"**",trimFirst:!0})}}window.customElements.get("md-bold")||(window.MarkdownBoldButtonElement=MarkdownBoldButtonElement,window.customElements.define("md-bold",MarkdownBoldButtonElement));class MarkdownItalicButtonElement extends MarkdownButtonElement{constructor(){super(),f.set(this,{prefix:"_",suffix:"_",trimFirst:!0})}}window.customElements.get("md-italic")||(window.MarkdownItalicButtonElement=MarkdownItalicButtonElement,window.customElements.define("md-italic",MarkdownItalicButtonElement));class MarkdownQuoteButtonElement extends MarkdownButtonElement{constructor(){super(),f.set(this,{prefix:"> ",multiline:!0,surroundWithNewlines:!0})}}window.customElements.get("md-quote")||(window.MarkdownQuoteButtonElement=MarkdownQuoteButtonElement,window.customElements.define("md-quote",MarkdownQuoteButtonElement));class MarkdownCodeButtonElement extends MarkdownButtonElement{constructor(){super(),f.set(this,{prefix:"`",suffix:"`",blockPrefix:"```",blockSuffix:"```"})}}window.customElements.get("md-code")||(window.MarkdownCodeButtonElement=MarkdownCodeButtonElement,window.customElements.define("md-code",MarkdownCodeButtonElement));class MarkdownLinkButtonElement extends MarkdownButtonElement{constructor(){super(),f.set(this,{prefix:"[",suffix:"](url)",replaceNext:"url",scanFor:"https?://"})}}window.customElements.get("md-link")||(window.MarkdownLinkButtonElement=MarkdownLinkButtonElement,window.customElements.define("md-link",MarkdownLinkButtonElement));class MarkdownImageButtonElement extends MarkdownButtonElement{constructor(){super(),f.set(this,{prefix:"![",suffix:"](url)",replaceNext:"url",scanFor:"https?://"})}}window.customElements.get("md-image")||(window.MarkdownImageButtonElement=MarkdownImageButtonElement,window.customElements.define("md-image",MarkdownImageButtonElement));class MarkdownUnorderedListButtonElement extends MarkdownButtonElement{constructor(){super(),f.set(this,{prefix:"- ",multiline:!0,unorderedList:!0})}}window.customElements.get("md-unordered-list")||(window.MarkdownUnorderedListButtonElement=MarkdownUnorderedListButtonElement,window.customElements.define("md-unordered-list",MarkdownUnorderedListButtonElement));class MarkdownOrderedListButtonElement extends MarkdownButtonElement{constructor(){super(),f.set(this,{prefix:"1. ",multiline:!0,orderedList:!0})}}window.customElements.get("md-ordered-list")||(window.MarkdownOrderedListButtonElement=MarkdownOrderedListButtonElement,window.customElements.define("md-ordered-list",MarkdownOrderedListButtonElement));class MarkdownTaskListButtonElement extends MarkdownButtonElement{constructor(){super(),f.set(this,{prefix:"- [ ] ",multiline:!0,surroundWithNewlines:!0})}}window.customElements.get("md-task-list")||(window.MarkdownTaskListButtonElement=MarkdownTaskListButtonElement,window.customElements.define("md-task-list",MarkdownTaskListButtonElement));class MarkdownMentionButtonElement extends MarkdownButtonElement{constructor(){super(),f.set(this,{prefix:"@",prefixSpace:!0})}}window.customElements.get("md-mention")||(window.MarkdownMentionButtonElement=MarkdownMentionButtonElement,window.customElements.define("md-mention",MarkdownMentionButtonElement));class MarkdownRefButtonElement extends MarkdownButtonElement{constructor(){super(),f.set(this,{prefix:"#",prefixSpace:!0})}}window.customElements.get("md-ref")||(window.MarkdownRefButtonElement=MarkdownRefButtonElement,window.customElements.define("md-ref",MarkdownRefButtonElement));class MarkdownStrikethroughButtonElement extends MarkdownButtonElement{constructor(){super(),f.set(this,{prefix:"~~",suffix:"~~",trimFirst:!0})}}window.customElements.get("md-strikethrough")||(window.MarkdownStrikethroughButtonElement=MarkdownStrikethroughButtonElement,window.customElements.define("md-strikethrough",MarkdownStrikethroughButtonElement));class MarkdownToolbarElement extends HTMLElement{constructor(){super()}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","toolbar"),this.addEventListener("keydown",h),this.setAttribute("tabindex","0"),this.addEventListener("focus",g,{once:!0})}disconnectedCallback(){this.removeEventListener("keydown",h)}get field(){let a=this.getAttribute("for");if(!a)return null;let b="getRootNode"in this?this.getRootNode():document,c;return(b instanceof Document||b instanceof ShadowRoot)&&(c=b.getElementById(a)),c instanceof HTMLTextAreaElement?c:null}}function g({target:a}){if(!(a instanceof Element))return;a.removeAttribute("tabindex");let b="0";for(let c of e(a))c.setAttribute("tabindex",b),"0"===b&&(c.focus(),b="-1")}function h(a){let b=a.key;if("ArrowRight"!==b&&"ArrowLeft"!==b&&"Home"!==b&&"End"!==b)return;let c=a.currentTarget;if(!(c instanceof HTMLElement))return;let d=e(c),f=d.indexOf(a.target),g=d.length;if(-1===f)return;let h=0;"ArrowLeft"===b&&(h=f-1),"ArrowRight"===b&&(h=f+1),"End"===b&&(h=g-1),h<0&&(h=g-1),h>g-1&&(h=0);for(let i=0;i<g;i+=1)d[i].setAttribute("tabindex",i===h?"0":"-1");a.preventDefault(),d[h].focus()}function i(a){return a.trim().split("\n").length>1}function j(a,b){return Array(b+1).join(a)}window.customElements.get("markdown-toolbar")||(window.MarkdownToolbarElement=MarkdownToolbarElement,window.customElements.define("markdown-toolbar",MarkdownToolbarElement));let k=null;function l(a){let b=a.value.slice(0,a.selectionStart),c=a.value.slice(a.selectionEnd),d=b.match(/\n*$/),e=c.match(/^\n*/),f=d?d[0].length:0,g=e?e[0].length:0,h,i;return b.match(/\S/)&&f<2&&(h=j("\n",2-f)),c.match(/\S/)&&g<2&&(i=j("\n",2-g)),null==h&&(h=""),null==i&&(i=""),{newlinesToAppend:h,newlinesToPrepend:i}}function m(a){let b=a.split("\n"),c=/^\d+\.\s+/,d=b.every(a=>c.test(a)),e=b;return d&&(e=b.map(a=>a.replace(c,""))),{text:e.join("\n"),processed:d}}function n(a){let b=a.split("\n"),c=b.every(a=>a.startsWith("- ")),d=b;return c&&(d=b.map(a=>a.slice(2,a.length))),{text:d.join("\n"),processed:c}}function o(a,b){return b?"- ":`${a+1}. `}function p(a,b){let c=a.closest("markdown-toolbar");if(!(c instanceof MarkdownToolbarElement))return;let d={prefix:"",suffix:"",blockPrefix:"",blockSuffix:"",multiline:!1,replaceNext:"",prefixSpace:!1,scanFor:"",surroundWithNewlines:!1,orderedList:!1,unorderedList:!1,trimFirst:!1},e=Object.assign(Object.assign({},d),b),f=c.field;f&&(f.focus(),function(a,b){let c=a.value.slice(a.selectionStart,a.selectionEnd),d;d=b.orderedList||b.unorderedList?function a(b,c){var d,e;let f=b.selectionStart===b.selectionEnd,g=b.selectionStart,h=b.selectionEnd;!function(a){let b=a.value.split("\n"),c=0;for(let d=0;d<b.length;d++){let e=b[d].length+1;a.selectionStart>=c&&a.selectionStart<c+e&&(a.selectionStart=c),a.selectionEnd>=c&&a.selectionEnd<c+e&&(a.selectionEnd=c+e-1),c+=e}}(b);let i=b.value.slice(b.selectionStart,b.selectionEnd),j,k,p,[q,r,s]=(d=c,e=i,p=d.orderedList?(j=n((k=m(e)).text)).text:(j=m((k=n(e)).text)).text,[k,j,p]),t=s.split("\n").map((a,b)=>`${o(b,c.unorderedList)}${a}`),u=t.reduce((a,b,d)=>a+o(d,c.unorderedList).length,0),v=t.reduce((a,b,d)=>a+o(d,!c.unorderedList).length,0);if(q.processed)return f?h=g=Math.max(g-o(0,c.unorderedList).length,0):(g=b.selectionStart,h=b.selectionEnd-u),{text:s,selectionStart:g,selectionEnd:h};let{newlinesToAppend:w,newlinesToPrepend:x}=l(b),y=w+t.join("\n")+x;return f?h=g=Math.max(g+o(0,c.unorderedList).length+w.length,0):r.processed?(g=Math.max(b.selectionStart+w.length,0),h=b.selectionEnd+w.length+u-v):(g=Math.max(b.selectionStart+w.length,0),h=b.selectionEnd+w.length+u),{text:y,selectionStart:g,selectionEnd:h}}(a,b):b.multiline&&i(c)?function a(b,c){let{prefix:d,suffix:e,surroundWithNewlines:f}=c,g=b.value.slice(b.selectionStart,b.selectionEnd),h=b.selectionStart,i=b.selectionEnd,j=g.split("\n"),k=j.every(a=>a.startsWith(d)&&a.endsWith(e));if(k)i=h+(g=j.map(a=>a.slice(d.length,a.length-e.length)).join("\n")).length;else if(g=j.map(a=>d+a+e).join("\n"),f){let{newlinesToAppend:m,newlinesToPrepend:n}=l(b);h+=m.length,i=h+g.length,g=m+g+n}return{text:g,selectionStart:h,selectionEnd:i}}(a,b):function a(b,c){let d,e,{prefix:f,suffix:g,blockPrefix:h,blockSuffix:j,replaceNext:k,prefixSpace:m,scanFor:n,surroundWithNewlines:o}=c,p=b.selectionStart,q=b.selectionEnd,r=b.value.slice(b.selectionStart,b.selectionEnd),s=i(r)&&h.length>0?`${h}
`:f,t=i(r)&&j.length>0?`
${j}`:g;if(m){let u=b.value[b.selectionStart-1];0===b.selectionStart||null==u||u.match(/\s/)||(s=` ${s}`)}r=function(a,b,c,d=!1){if(a.selectionStart===a.selectionEnd)a.selectionStart=function(a,b){let c=b;for(;a[c]&&null!=a[c-1]&&!a[c-1].match(/\s/);)c--;return c}(a.value,a.selectionStart),a.selectionEnd=function(a,b,c){let d=b,e=c?/\n/:/\s/;for(;a[d]&&!a[d].match(e);)d++;return d}(a.value,a.selectionEnd,d);else{let e=a.selectionStart-b.length,f=a.selectionEnd+c.length,g=a.value.slice(e,a.selectionStart)===b,h=a.value.slice(a.selectionEnd,f)===c;g&&h&&(a.selectionStart=e,a.selectionEnd=f)}return a.value.slice(a.selectionStart,a.selectionEnd)}(b,s,t,c.multiline);let v=b.selectionStart,w=b.selectionEnd,x=k.length>0&&t.indexOf(k)> -1&&r.length>0;if(o){let y=l(b);d=y.newlinesToAppend,e=y.newlinesToPrepend,s=d+f,t+=e}if(r.startsWith(s)&&r.endsWith(t)){let z=r.slice(s.length,r.length-t.length);if(p===q){let A=p-s.length;A=Math.max(A,v),A=Math.min(A,v+z.length),v=w=A}else w=v+z.length;return{text:z,selectionStart:v,selectionEnd:w}}if(x){if(n.length>0&&r.match(n)){t=t.replace(k,r);let B=s+t;return v=w=v+s.length,{text:B,selectionStart:v,selectionEnd:w}}{let C=s+r+t;return w=(v=v+s.length+r.length+t.indexOf(k))+k.length,{text:C,selectionStart:v,selectionEnd:w}}}{let D=s+r+t;v=p+s.length,w=q+s.length;let E=r.match(/^\s*|\s*$/g);if(c.trimFirst&&E){let F=E[0]||"",G=E[1]||"";D=F+s+r.trim()+t+G,v+=F.length,w-=G.length}return{text:D,selectionStart:v,selectionEnd:w}}}(a,b),function(a,{text:b,selectionStart:c,selectionEnd:d}){let e=a.selectionStart,f=a.value.slice(0,e),g=a.value.slice(a.selectionEnd);if(null===k|| !0===k){a.contentEditable="true";try{k=document.execCommand("insertText",!1,b)}catch(h){k=!1}a.contentEditable="false"}if(k&&!a.value.slice(0,a.selectionStart).endsWith(b)&&(k=!1),!k){try{document.execCommand("ms-beginUndoUnit")}catch(i){}a.value=f+b+g;try{document.execCommand("ms-endUndoUnit")}catch(j){}a.dispatchEvent(new CustomEvent("input",{bubbles:!0,cancelable:!0}))}null!=c&&null!=d?a.setSelectionRange(c,d):a.setSelectionRange(e,a.selectionEnd)}(a,d)}(f,e))}let q=MarkdownToolbarElement}}])
//# sourceMappingURL=vendors-node_modules_fzy_js_index_js-node_modules_github_markdown-toolbar-element_dist_index_js-f1525cab7fc3.js.map