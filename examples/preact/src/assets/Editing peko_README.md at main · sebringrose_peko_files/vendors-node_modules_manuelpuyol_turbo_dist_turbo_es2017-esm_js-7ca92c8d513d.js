"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["vendors-node_modules_manuelpuyol_turbo_dist_turbo_es2017-esm_js"],{74395(a,b,c){c.r(b),c.d(b,{FrameElement:()=>FrameElement,FrameLoadingStyle:()=>as,FrameRenderer:()=>FrameRenderer,PageRenderer:()=>PageRenderer,PageSnapshot:()=>PageSnapshot,StreamActions:()=>Y,StreamElement:()=>StreamElement,StreamSourceElement:()=>StreamSourceElement,cache:()=>$,clearCache:()=>ag,connectStreamSource:()=>ad,disconnectStreamSource:()=>ae,navigator:()=>_,registerAdapter:()=>ab,renderStreamMessage:()=>af,session:()=>Z,setConfirmMethod:()=>ai,setFormMode:()=>aj,setProgressBarDelay:()=>ah,start:()=>aa,visit:()=>ac}),function(){if(void 0===window.Reflect|| void 0===window.customElements||window.customElements.polyfillWrapFlushCallback)return;let a=HTMLElement;window.HTMLElement=({HTMLElement:function(){return Reflect.construct(a,[],this.constructor)}}).HTMLElement,HTMLElement.prototype=a.prototype,HTMLElement.prototype.constructor=HTMLElement,Object.setPrototypeOf(HTMLElement,a)}(),function(a){function b(a,b,c){throw new a("Failed to execute 'requestSubmit' on 'HTMLFormElement': "+b+".",c)}"function"!=typeof a.requestSubmit&&(a.requestSubmit=function(a){var c,d;a?(c=a,d=this,c instanceof HTMLElement||b(TypeError,"parameter 1 is not of type 'HTMLElement'"),"submit"==c.type||b(TypeError,"The specified element is not a submit button"),c.form==d||b(DOMException,"The specified element is not owned by this form element","NotFoundError"),a.click()):((a=document.createElement("input")).type="submit",a.hidden=!0,this.appendChild(a),a.click(),this.removeChild(a))})}(HTMLFormElement.prototype);let d=new WeakMap;function e(a){let b=function(a){let b=a instanceof Element?a:a instanceof Node?a.parentElement:null,c=b?b.closest("input, button"):null;return(null==c?void 0:c.type)=="submit"?c:null}(a.target);b&&b.form&&d.set(b.form,b)}!function(){if("submitter"in Event.prototype)return;let a;if("SubmitEvent"in window&&/Apple Computer/.test(navigator.vendor))a=window.SubmitEvent.prototype;else{if("SubmitEvent"in window)return;a=window.Event.prototype}addEventListener("click",e,!0),Object.defineProperty(a,"submitter",{get(){if("submit"==this.type&&this.target instanceof HTMLFormElement)return d.get(this.target)}})}(),(ak=as||(as={})).eager="eager",ak.lazy="lazy";class FrameElement extends HTMLElement{constructor(){super(),this.loaded=Promise.resolve(),this.delegate=new FrameElement.delegateConstructor(this)}static get observedAttributes(){return["disabled","complete","loading","src"]}connectedCallback(){this.delegate.connect()}disconnectedCallback(){this.delegate.disconnect()}reload(){return this.delegate.sourceURLReloaded()}attributeChangedCallback(a){"loading"==a?this.delegate.loadingStyleChanged():"complete"==a?this.delegate.completeChanged():"src"==a?this.delegate.sourceURLChanged():this.delegate.disabledChanged()}get src(){return this.getAttribute("src")}set src(a){a?this.setAttribute("src",a):this.removeAttribute("src")}get loading(){return f(this.getAttribute("loading")||"")}set loading(a){a?this.setAttribute("loading",a):this.removeAttribute("loading")}get disabled(){return this.hasAttribute("disabled")}set disabled(a){a?this.setAttribute("disabled",""):this.removeAttribute("disabled")}get autoscroll(){return this.hasAttribute("autoscroll")}set autoscroll(a){a?this.setAttribute("autoscroll",""):this.removeAttribute("autoscroll")}get complete(){return!this.delegate.isLoading}get isActive(){return this.ownerDocument===document&&!this.isPreview}get isPreview(){var a,b;return null===(b=null===(a=this.ownerDocument)|| void 0===a?void 0:a.documentElement)|| void 0===b?void 0:b.hasAttribute("data-turbo-preview")}}function f(a){return"lazy"===a.toLowerCase()?as.lazy:(0,as.eager)}function g(a){return new URL(a.toString(),document.baseURI)}function h(a){let b;return a.hash?a.hash.slice(1):(b=a.href.match(/#(.*)$/))?b[1]:void 0}function i(a,b){let c=(null==b?void 0:b.getAttribute("formaction"))||a.getAttribute("action")||a.action;return g(c)}function j(a){let b=h(a);return null!=b?a.href.slice(0,-(b.length+1)):a.href}function k(a){return j(a)}function l(a){return a.endsWith("/")?a:a+"/"}class FetchResponse{constructor(a){this.response=a}get succeeded(){return this.response.ok}get failed(){return!this.succeeded}get clientError(){return this.statusCode>=400&&this.statusCode<=499}get serverError(){return this.statusCode>=500&&this.statusCode<=599}get redirected(){return this.response.redirected}get location(){return g(this.response.url)}get isHTML(){return this.contentType&&this.contentType.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)}get statusCode(){return this.response.status}get contentType(){return this.header("Content-Type")}get responseText(){return this.response.clone().text()}get responseHTML(){return this.isHTML?this.response.clone().text():Promise.resolve(void 0)}header(a){return this.response.headers.get(a)}}function m(a){return"advance"==a||"replace"==a||"restore"==a}function n(a){if("false"==a.getAttribute("data-turbo-eval"))return a;{let b=document.createElement("script"),c=B("csp-nonce");return c&&(b.nonce=c),b.textContent=a.textContent,b.async=!1,o(b,a),b}}function o(a,b){for(let{name:c,value:d}of b.attributes)a.setAttribute(c,d)}function p(a,{target:b,cancelable:c,detail:d}={}){let e=new CustomEvent(a,{cancelable:c,bubbles:!0,detail:d});return b&&b.isConnected?b.dispatchEvent(e):document.documentElement.dispatchEvent(e),e}function q(){return new Promise(a=>requestAnimationFrame(()=>a()))}function r(a=""){return new DOMParser().parseFromString(a,"text/html")}function s(a,...b){let c=t(a,b).replace(/^\n/,"").split("\n"),d=c[0].match(/^\s+/),e=d?d[0].length:0;return c.map(a=>a.slice(e)).join("\n")}function t(a,b){return a.reduce((a,c,d)=>{let e=void 0==b[d]?"":b[d];return a+c+e},"")}function u(){return Array.from({length:36}).map((a,b)=>8==b||13==b||18==b||23==b?"-":14==b?"4":19==b?(Math.floor(4*Math.random())+8).toString(16):Math.floor(15*Math.random()).toString(16)).join("")}function v(a,...b){for(let c of b.map(b=>null==b?void 0:b.getAttribute(a)))if("string"==typeof c)return c;return null}function w(...a){for(let b of a)"turbo-frame"==b.localName&&b.setAttribute("busy",""),b.setAttribute("aria-busy","true")}function x(...a){for(let b of a)"turbo-frame"==b.localName&&b.removeAttribute("busy"),b.removeAttribute("aria-busy")}function y(a,b=2e3){return new Promise(c=>{let d=()=>{a.removeEventListener("error",d),a.removeEventListener("load",d),c()};a.addEventListener("load",d,{once:!0}),a.addEventListener("error",d,{once:!0}),setTimeout(c,b)})}function z(a){switch(a){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}function A(a){return document.querySelector(`meta[name="${a}"]`)}function B(a){let b=A(a);return b&&b.content}(al=at||(at={}))[al.get=0]="get",al[al.post=1]="post",al[al.put=2]="put",al[al.patch=3]="patch",al[al.delete=4]="delete";class FetchRequest{constructor(a,b,c,d=new URLSearchParams,e=null){this.abortController=new AbortController,this.resolveRequestPromise=a=>{},this.delegate=a,this.method=b,this.headers=this.defaultHeaders,this.body=d,this.url=c,this.target=e}get location(){return this.url}get params(){return this.url.searchParams}get entries(){return this.body?Array.from(this.body.entries()):[]}cancel(){this.abortController.abort()}async perform(){var a,b;let{fetchOptions:c}=this;null===(b=(a=this.delegate).prepareHeadersForRequest)|| void 0===b||b.call(a,this.headers,this),await this.allowRequestToBeIntercepted(c);try{this.delegate.requestStarted(this);let d=await fetch(this.url.href,c);return await this.receive(d)}catch(e){if("AbortError"!==e.name)throw this.willDelegateErrorHandling(e)&&this.delegate.requestErrored(this,e),e}finally{this.delegate.requestFinished(this)}}async receive(a){let b=new FetchResponse(a),c=p("turbo:before-fetch-response",{cancelable:!0,detail:{fetchResponse:b},target:this.target});return c.defaultPrevented?this.delegate.requestPreventedHandlingResponse(this,b):b.succeeded?this.delegate.requestSucceededWithResponse(this,b):this.delegate.requestFailedWithResponse(this,b),b}get fetchOptions(){var a;return{method:at[this.method].toUpperCase(),credentials:"same-origin",headers:this.headers,redirect:"follow",body:this.isIdempotent?null:this.body,signal:this.abortSignal,referrer:null===(a=this.delegate.referrer)|| void 0===a?void 0:a.href}}get defaultHeaders(){return{Accept:"text/html, application/xhtml+xml"}}get isIdempotent(){return this.method==at.get}get abortSignal(){return this.abortController.signal}acceptResponseType(a){this.headers.Accept=[a,this.headers.Accept].join(", ")}async allowRequestToBeIntercepted(a){let b=new Promise(a=>this.resolveRequestPromise=a),c=p("turbo:before-fetch-request",{cancelable:!0,detail:{fetchOptions:a,url:this.url,resume:this.resolveRequestPromise},target:this.target});c.defaultPrevented&&await b}willDelegateErrorHandling(a){let b=p("turbo:fetch-request-error",{target:this.target,cancelable:!0,detail:{request:this,error:a}});return!b.defaultPrevented}}class StreamMessage{constructor(a){this.fragment=function(a){for(let b of a.querySelectorAll("turbo-stream")){let c=document.importNode(b,!0);for(let d of c.templateElement.content.querySelectorAll("script"))d.replaceWith(n(d));b.replaceWith(c)}return a}(a)}static wrap(a){return"string"==typeof a?new this(function(a){let b=document.createElement("template");return b.innerHTML=a,b.content}(a)):a}}StreamMessage.contentType="text/vnd.turbo-stream.html",(am=au||(au={}))[am.initialized=0]="initialized",am[am.requesting=1]="requesting",am[am.waiting=2]="waiting",am[am.receiving=3]="receiving",am[am.stopping=4]="stopping",am[am.stopped=5]="stopped",(an=av||(av={})).urlEncoded="application/x-www-form-urlencoded",an.multipart="multipart/form-data",an.plain="text/plain";class FormSubmission{constructor(a,b,c,d=!1){this.state=au.initialized,this.delegate=a,this.formElement=b,this.submitter=c,this.formData=function(a,b){let c=new FormData(a),d=null==b?void 0:b.getAttribute("name"),e=null==b?void 0:b.getAttribute("value");return d&&c.append(d,e||""),c}(b,c),this.location=g(this.action),this.method==at.get&&function(a,b){let c=new URLSearchParams;for(let[d,e]of b)e instanceof File||c.append(d,e);a.search=c.toString()}(this.location,[...this.body.entries()]),this.fetchRequest=new FetchRequest(this,this.method,this.location,this.body,this.formElement),this.mustRedirect=d}static confirmMethod(a,b,c){return Promise.resolve(confirm(a))}get method(){var a;let b=(null===(a=this.submitter)|| void 0===a?void 0:a.getAttribute("formmethod"))||this.formElement.getAttribute("method")||"";return function(a){switch(a.toLowerCase()){case"get":return at.get;case"post":return at.post;case"put":return at.put;case"patch":return at.patch;case"delete":return at.delete}}(b.toLowerCase())||at.get}get action(){var a;let b="string"==typeof this.formElement.action?this.formElement.action:null;return(null===(a=this.submitter)|| void 0===a?void 0:a.hasAttribute("formaction"))?this.submitter.getAttribute("formaction")||"":this.formElement.getAttribute("action")||b||""}get body(){return this.enctype==av.urlEncoded||this.method==at.get?new URLSearchParams(this.stringFormData):this.formData}get enctype(){var a;return function(a){switch(a.toLowerCase()){case av.multipart:return av.multipart;case av.plain:return av.plain;default:return av.urlEncoded}}((null===(a=this.submitter)|| void 0===a?void 0:a.getAttribute("formenctype"))||this.formElement.enctype)}get isIdempotent(){return this.fetchRequest.isIdempotent}get stringFormData(){return[...this.formData].reduce((a,[b,c])=>a.concat("string"==typeof c?[[b,c]]:[]),[])}async start(){let{initialized:a,requesting:b}=au,c=v("data-turbo-confirm",this.submitter,this.formElement);if("string"==typeof c){let d=await FormSubmission.confirmMethod(c,this.formElement,this.submitter);if(!d)return}if(this.state==a)return this.state=b,this.fetchRequest.perform()}stop(){let{stopping:a,stopped:b}=au;if(this.state!=a&&this.state!=b)return this.state=a,this.fetchRequest.cancel(),!0}prepareHeadersForRequest(a,b){if(!b.isIdempotent){let c=C(B("csrf-param"))||B("csrf-token");c&&(a["X-CSRF-Token"]=c)}this.requestAcceptsTurboStreamResponse(b)&&b.acceptResponseType(StreamMessage.contentType)}requestStarted(a){var b;this.state=au.waiting,null===(b=this.submitter)|| void 0===b||b.setAttribute("disabled",""),p("turbo:submit-start",{target:this.formElement,detail:{formSubmission:this}}),this.delegate.formSubmissionStarted(this)}requestPreventedHandlingResponse(a,b){this.result={success:b.succeeded,fetchResponse:b}}requestSucceededWithResponse(a,b){if(b.clientError||b.serverError)this.delegate.formSubmissionFailedWithResponse(this,b);else if(this.requestMustRedirect(a)&&D(b)){let c=Error("Form responses must redirect to another location");this.delegate.formSubmissionErrored(this,c)}else this.state=au.receiving,this.result={success:!0,fetchResponse:b},this.delegate.formSubmissionSucceededWithResponse(this,b)}requestFailedWithResponse(a,b){this.result={success:!1,fetchResponse:b},this.delegate.formSubmissionFailedWithResponse(this,b)}requestErrored(a,b){this.result={success:!1,error:b},this.delegate.formSubmissionErrored(this,b)}requestFinished(a){var b;this.state=au.stopped,null===(b=this.submitter)|| void 0===b||b.removeAttribute("disabled"),p("turbo:submit-end",{target:this.formElement,detail:Object.assign({formSubmission:this},this.result)}),this.delegate.formSubmissionFinished(this)}requestMustRedirect(a){return!a.isIdempotent&&this.mustRedirect}requestAcceptsTurboStreamResponse(a){return!a.isIdempotent||function(a,...b){return b.some(b=>b&&b.hasAttribute(a))}("data-turbo-stream",this.submitter,this.formElement)}}function C(a){if(null!=a){let b=document.cookie?document.cookie.split("; "):[],c=b.find(b=>b.startsWith(a));if(c){let d=c.split("=").slice(1).join("=");return d?decodeURIComponent(d):void 0}}}function D(a){return 200==a.statusCode&&!a.redirected}class Snapshot{constructor(a){this.element=a}get activeElement(){return this.element.ownerDocument.activeElement}get children(){return[...this.element.children]}hasAnchor(a){return null!=this.getElementForAnchor(a)}getElementForAnchor(a){return a?this.element.querySelector(`[id='${a}'], a[name='${a}']`):null}get isConnected(){return this.element.isConnected}get firstAutofocusableElement(){for(let a of this.element.querySelectorAll("[autofocus]"))if(null==a.closest("[inert], :disabled, [hidden], details:not([open]), dialog:not([open])"))return a;return null}get permanentElements(){return F(this.element)}getPermanentElementById(a){return E(this.element,a)}getPermanentElementMapForSnapshot(a){let b={};for(let c of this.permanentElements){let{id:d}=c,e=a.getPermanentElementById(d);e&&(b[d]=[c,e])}return b}}function E(a,b){return a.querySelector(`#${b}[data-turbo-permanent]`)}function F(a){return a.querySelectorAll("[id][data-turbo-permanent]")}class FormSubmitObserver{constructor(a,b){this.started=!1,this.submitCaptured=()=>{this.eventTarget.removeEventListener("submit",this.submitBubbled,!1),this.eventTarget.addEventListener("submit",this.submitBubbled,!1)},this.submitBubbled=a=>{if(!a.defaultPrevented){let b=a.target instanceof HTMLFormElement?a.target:void 0,c=a.submitter||void 0;b&&G(b,c)&&H(b,c)&&this.delegate.willSubmitForm(b,c)&&(a.preventDefault(),this.delegate.formSubmitted(b,c))}},this.delegate=a,this.eventTarget=b}start(){this.started||(this.eventTarget.addEventListener("submit",this.submitCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("submit",this.submitCaptured,!0),this.started=!1)}}function G(a,b){let c=(null==b?void 0:b.getAttribute("formmethod"))||a.getAttribute("method");return"dialog"!=c}function H(a,b){let c=(null==b?void 0:b.getAttribute("formtarget"))||a.target;for(let d of document.getElementsByName(c))if(d instanceof HTMLIFrameElement)return!1;return!0}class View{constructor(a,b){this.resolveRenderPromise=a=>{},this.resolveInterceptionPromise=a=>{},this.delegate=a,this.element=b}scrollToAnchor(a){let b=this.snapshot.getElementForAnchor(a);b?(this.scrollToElement(b),this.focusElement(b)):this.scrollToPosition({x:0,y:0})}scrollToAnchorFromLocation(a){this.scrollToAnchor(h(a))}scrollToElement(a){a.scrollIntoView()}focusElement(a){a instanceof HTMLElement&&(a.hasAttribute("tabindex")?a.focus():(a.setAttribute("tabindex","-1"),a.focus(),a.removeAttribute("tabindex")))}scrollToPosition({x:a,y:b}){this.scrollRoot.scrollTo(a,b)}scrollToTop(){this.scrollToPosition({x:0,y:0})}get scrollRoot(){return window}async render(a){let{isPreview:b,shouldRender:c,newSnapshot:d}=a;if(c)try{this.renderPromise=new Promise(a=>this.resolveRenderPromise=a),this.renderer=a,await this.prepareToRenderSnapshot(a);let e=new Promise(a=>this.resolveInterceptionPromise=a),f={resume:this.resolveInterceptionPromise,render:this.renderer.renderElement},g=this.delegate.allowsImmediateRender(d,f);g||await e,await this.renderSnapshot(a),this.delegate.viewRenderedSnapshot(d,b),this.delegate.preloadOnLoadLinksForView(this.element),this.finishRenderingSnapshot(a)}finally{delete this.renderer,this.resolveRenderPromise(void 0),delete this.renderPromise}else this.invalidate(a.reloadReason)}invalidate(a){this.delegate.viewInvalidated(a)}async prepareToRenderSnapshot(a){this.markAsPreview(a.isPreview),await a.prepareToRender()}markAsPreview(a){a?this.element.setAttribute("data-turbo-preview",""):this.element.removeAttribute("data-turbo-preview")}async renderSnapshot(a){await a.render()}finishRenderingSnapshot(a){a.finishRendering()}}class LinkClickObserver{constructor(a,b){this.started=!1,this.clickCaptured=()=>{this.eventTarget.removeEventListener("click",this.clickBubbled,!1),this.eventTarget.addEventListener("click",this.clickBubbled,!1)},this.clickBubbled=a=>{if(a instanceof MouseEvent&&this.clickEventIsSignificant(a)){let b=a.composedPath&&a.composedPath()[0]||a.target,c=this.findLinkFromClickTarget(b);if(c&&I(c)){let d=this.getLocationForLink(c);this.delegate.willFollowLinkToLocation(c,d,a)&&(a.preventDefault(),this.delegate.followedLinkToLocation(c,d))}}},this.delegate=a,this.eventTarget=b}start(){this.started||(this.eventTarget.addEventListener("click",this.clickCaptured,!0),this.started=!0)}stop(){this.started&&(this.eventTarget.removeEventListener("click",this.clickCaptured,!0),this.started=!1)}clickEventIsSignificant(a){return!(a.target&&a.target.isContentEditable||a.defaultPrevented||a.which>1||a.altKey||a.ctrlKey||a.metaKey||a.shiftKey)}findLinkFromClickTarget(a){if(a instanceof Element)return a.closest("a[href]:not([target^=_]):not([download])")}getLocationForLink(a){return g(a.getAttribute("href")||"")}}function I(a){for(let b of document.getElementsByName(a.target))if(b instanceof HTMLIFrameElement)return!1;return!0}class FormLinkClickObserver{constructor(a,b){this.delegate=a,this.linkClickObserver=new LinkClickObserver(this,b)}start(){this.linkClickObserver.start()}stop(){this.linkClickObserver.stop()}willFollowLinkToLocation(a,b,c){return this.delegate.willSubmitFormLinkToLocation(a,b,c)&&a.hasAttribute("data-turbo-method")}followedLinkToLocation(a,b){let c=b.href,d=document.createElement("form");d.setAttribute("data-turbo","true"),d.setAttribute("action",c),d.setAttribute("hidden","");let e=a.getAttribute("data-turbo-method");e&&d.setAttribute("method",e);let f=a.getAttribute("data-turbo-frame");f&&d.setAttribute("data-turbo-frame",f);let g=a.getAttribute("data-turbo-action");g&&d.setAttribute("data-turbo-action",g);let h=a.getAttribute("data-turbo-confirm");h&&d.setAttribute("data-turbo-confirm",h);let i=a.hasAttribute("data-turbo-stream");i&&d.setAttribute("data-turbo-stream",""),this.delegate.submittedFormLinkToLocation(a,b,d),document.body.appendChild(d),d.addEventListener("turbo:submit-end",()=>d.remove(),{once:!0}),requestAnimationFrame(()=>d.requestSubmit())}}class Bardo{constructor(a,b){this.delegate=a,this.permanentElementMap=b}static preservingPermanentElements(a,b,c){let d=new this(a,b);d.enter(),c(),d.leave()}enter(){for(let a in this.permanentElementMap){let[b,c]=this.permanentElementMap[a];this.delegate.enteringBardo(b,c),this.replaceNewPermanentElementWithPlaceholder(c)}}leave(){for(let a in this.permanentElementMap){let[b]=this.permanentElementMap[a];this.replaceCurrentPermanentElementWithClone(b),this.replacePlaceholderWithPermanentElement(b),this.delegate.leavingBardo(b)}}replaceNewPermanentElementWithPlaceholder(a){let b=J(a);a.replaceWith(b)}replaceCurrentPermanentElementWithClone(a){let b=a.cloneNode(!0);a.replaceWith(b)}replacePlaceholderWithPermanentElement(a){let b=this.getPlaceholderById(a.id);null==b||b.replaceWith(a)}getPlaceholderById(a){return this.placeholders.find(b=>b.content==a)}get placeholders(){return[...document.querySelectorAll("meta[name=turbo-permanent-placeholder][content]")]}}function J(a){let b=document.createElement("meta");return b.setAttribute("name","turbo-permanent-placeholder"),b.setAttribute("content",a.id),b}class Renderer{constructor(a,b,c,d,e=!0){this.activeElement=null,this.currentSnapshot=a,this.newSnapshot=b,this.isPreview=d,this.willRender=e,this.renderElement=c,this.promise=new Promise((a,b)=>this.resolvingFunctions={resolve:a,reject:b})}get shouldRender(){return!0}get reloadReason(){}prepareToRender(){}finishRendering(){this.resolvingFunctions&&(this.resolvingFunctions.resolve(),delete this.resolvingFunctions)}preservingPermanentElements(a){Bardo.preservingPermanentElements(this,this.permanentElementMap,a)}focusFirstAutofocusableElement(){let a=this.connectedSnapshot.firstAutofocusableElement;K(a)&&a.focus()}enteringBardo(a){!this.activeElement&&a.contains(this.currentSnapshot.activeElement)&&(this.activeElement=this.currentSnapshot.activeElement)}leavingBardo(a){a.contains(this.activeElement)&&this.activeElement instanceof HTMLElement&&(this.activeElement.focus(),this.activeElement=null)}get connectedSnapshot(){return this.newSnapshot.isConnected?this.newSnapshot:this.currentSnapshot}get currentElement(){return this.currentSnapshot.element}get newElement(){return this.newSnapshot.element}get permanentElementMap(){return this.currentSnapshot.getPermanentElementMapForSnapshot(this.newSnapshot)}}function K(a){return a&&"function"==typeof a.focus}class FrameRenderer extends Renderer{constructor(a,b,c,d,e,f=!0){super(b,c,d,e,f),this.delegate=a}static renderElement(a,b){var c;let d=document.createRange();d.selectNodeContents(a),d.deleteContents();let e=b,f=null===(c=e.ownerDocument)|| void 0===c?void 0:c.createRange();f&&(f.selectNodeContents(e),a.appendChild(f.extractContents()))}get shouldRender(){return!0}async render(){await q(),this.preservingPermanentElements(()=>{this.loadFrameElement()}),this.scrollFrameIntoView(),await q(),this.focusFirstAutofocusableElement(),await q(),this.activateScriptElements()}loadFrameElement(){this.delegate.willRenderFrame(this.currentElement,this.newElement),this.renderElement(this.currentElement,this.newElement)}scrollFrameIntoView(){if(this.currentElement.autoscroll||this.newElement.autoscroll){let a=this.currentElement.firstElementChild,b=L(this.currentElement.getAttribute("data-autoscroll-block"),"end"),c=M(this.currentElement.getAttribute("data-autoscroll-behavior"),"auto");if(a)return a.scrollIntoView({block:b,behavior:c}),!0}return!1}activateScriptElements(){for(let a of this.newScriptElements){let b=n(a);a.replaceWith(b)}}get newScriptElements(){return this.currentElement.querySelectorAll("script")}}function L(a,b){return"end"==a||"start"==a||"center"==a||"nearest"==a?a:b}function M(a,b){return"auto"==a||"smooth"==a?a:b}class ProgressBar{constructor(){this.hiding=!1,this.value=0,this.visible=!1,this.trickle=()=>{this.setValue(this.value+Math.random()/100)},this.stylesheetElement=this.createStylesheetElement(),this.progressElement=this.createProgressElement(),this.installStylesheetElement(),this.setValue(0)}static get defaultCSS(){return s`
      .turbo-progress-bar {
        position: fixed;
        display: block;
        top: 0;
        left: 0;
        height: 3px;
        background: #0076ff;
        z-index: 2147483647;
        transition:
          width ${ProgressBar.animationDuration}ms ease-out,
          opacity ${ProgressBar.animationDuration/2}ms ${ProgressBar.animationDuration/2}ms ease-in;
        transform: translate3d(0, 0, 0);
      }
    `}show(){this.visible||(this.visible=!0,this.installProgressElement(),this.startTrickling())}hide(){this.visible&&!this.hiding&&(this.hiding=!0,this.fadeProgressElement(()=>{this.uninstallProgressElement(),this.stopTrickling(),this.visible=!1,this.hiding=!1}))}setValue(a){this.value=a,this.refresh()}installStylesheetElement(){document.head.insertBefore(this.stylesheetElement,document.head.firstChild)}installProgressElement(){this.progressElement.style.width="0",this.progressElement.style.opacity="1",document.documentElement.insertBefore(this.progressElement,document.body),this.refresh()}fadeProgressElement(a){this.progressElement.style.opacity="0",setTimeout(a,1.5*ProgressBar.animationDuration)}uninstallProgressElement(){this.progressElement.parentNode&&document.documentElement.removeChild(this.progressElement)}startTrickling(){this.trickleInterval||(this.trickleInterval=window.setInterval(this.trickle,ProgressBar.animationDuration))}stopTrickling(){window.clearInterval(this.trickleInterval),delete this.trickleInterval}refresh(){requestAnimationFrame(()=>{this.progressElement.style.width=`${10+90*this.value}%`})}createStylesheetElement(){let a=document.createElement("style");return a.type="text/css",a.textContent=ProgressBar.defaultCSS,this.cspNonce&&(a.nonce=this.cspNonce),a}createProgressElement(){let a=document.createElement("div");return a.className="turbo-progress-bar",a}get cspNonce(){return B("csp-nonce")}}ProgressBar.animationDuration=300;class HeadSnapshot extends Snapshot{constructor(){super(...arguments),this.detailsByOuterHTML=this.children.filter(a=>!Q(a)).map(a=>T(a)).reduce((a,b)=>{let{outerHTML:c}=b,d=c in a?a[c]:{type:N(b),tracked:O(b),elements:[]};return Object.assign(Object.assign({},a),{[c]:Object.assign(Object.assign({},d),{elements:[...d.elements,b]})})},{})}get trackedElementSignature(){return Object.keys(this.detailsByOuterHTML).filter(a=>this.detailsByOuterHTML[a].tracked).join("")}getScriptElementsNotInSnapshot(a){return this.getElementsMatchingTypeNotInSnapshot("script",a)}getStylesheetElementsNotInSnapshot(a){return this.getElementsMatchingTypeNotInSnapshot("stylesheet",a)}getElementsMatchingTypeNotInSnapshot(a,b){return Object.keys(this.detailsByOuterHTML).filter(a=>!(a in b.detailsByOuterHTML)).map(a=>this.detailsByOuterHTML[a]).filter(({type:b})=>b==a).map(({elements:[a]})=>a)}get provisionalElements(){return Object.keys(this.detailsByOuterHTML).reduce((a,b)=>{let{type:c,tracked:d,elements:e}=this.detailsByOuterHTML[b];return null!=c||d?e.length>1?[...a,...e.slice(1)]:a:[...a,...e]},[])}getMetaValue(a){let b=this.findMetaElementByName(a);return b?b.getAttribute("content"):null}findMetaElementByName(a){return Object.keys(this.detailsByOuterHTML).reduce((b,c)=>{let{elements:[d]}=this.detailsByOuterHTML[c];return S(d,a)?d:b},void 0)}}function N(a){return P(a)?"script":R(a)?"stylesheet":void 0}function O(a){return"reload"==a.getAttribute("data-turbo-track")}function P(a){let b=a.localName;return"script"==b}function Q(a){let b=a.localName;return"noscript"==b}function R(a){let b=a.localName;return"style"==b||"link"==b&&"stylesheet"==a.getAttribute("rel")}function S(a,b){let c=a.localName;return"meta"==c&&a.getAttribute("name")==b}function T(a){return a.hasAttribute("nonce")&&a.setAttribute("nonce",""),a}class PageSnapshot extends Snapshot{constructor(a,b){super(a),this.headSnapshot=b}static fromHTMLString(a=""){return this.fromDocument(r(a))}static fromElement(a){return this.fromDocument(a.ownerDocument)}static fromDocument({head:a,body:b}){return new this(b,new HeadSnapshot(a))}clone(){let a=this.element.cloneNode(!0),b=this.element.querySelectorAll("select"),c=a.querySelectorAll("select");for(let[d,e]of b.entries()){let f=c[d];for(let g of f.selectedOptions)g.selected=!1;for(let h of e.selectedOptions)f.options[h.index].selected=!0}for(let i of a.querySelectorAll('input[type="password"]'))i.value="";return new PageSnapshot(a,this.headSnapshot)}get headElement(){return this.headSnapshot.element}get rootLocation(){var a;let b=null!==(a=this.getSetting("root"))&& void 0!==a?a:"/";return g(b)}get cacheControlValue(){return this.getSetting("cache-control")}get isPreviewable(){return"no-preview"!=this.cacheControlValue}get isCacheable(){return"no-cache"!=this.cacheControlValue}get isVisitable(){return"reload"!=this.getSetting("visit-control")}getSetting(a){return this.headSnapshot.getMetaValue(`turbo-${a}`)}}(ao=aw||(aw={})).visitStart="visitStart",ao.requestStart="requestStart",ao.requestEnd="requestEnd",ao.visitEnd="visitEnd",(ap=ax||(ax={})).initialized="initialized",ap.started="started",ap.canceled="canceled",ap.failed="failed",ap.completed="completed";let U={action:"advance",historyChanged:!1,visitCachedSnapshot(){},willRender:!0,updateHistory:!0,shouldCacheSnapshot:!0,acceptsStreamResponse:!1};(aq=ay||(ay={}))[aq.networkFailure=0]="networkFailure",aq[aq.timeoutFailure=-1]="timeoutFailure",aq[aq.contentTypeMismatch=-2]="contentTypeMismatch";class Visit{constructor(a,b,c,d={}){this.identifier=u(),this.timingMetrics={},this.followedRedirect=!1,this.historyChanged=!1,this.scrolled=!1,this.shouldCacheSnapshot=!0,this.acceptsStreamResponse=!1,this.snapshotCached=!1,this.state=ax.initialized,this.delegate=a,this.location=b,this.restorationIdentifier=c||u();let{action:e,historyChanged:f,referrer:g,snapshot:h,snapshotHTML:i,response:j,visitCachedSnapshot:k,willRender:l,updateHistory:m,shouldCacheSnapshot:n,acceptsStreamResponse:o}=Object.assign(Object.assign({},U),d);this.action=e,this.historyChanged=f,this.referrer=g,this.snapshot=h,this.snapshotHTML=i,this.response=j,this.isSamePage=this.delegate.locationWithActionIsSamePage(this.location,this.action),this.visitCachedSnapshot=k,this.willRender=l,this.updateHistory=m,this.scrolled=!l,this.shouldCacheSnapshot=n,this.acceptsStreamResponse=o}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}get restorationData(){return this.history.getRestorationDataForIdentifier(this.restorationIdentifier)}get silent(){return this.isSamePage}start(){this.state==ax.initialized&&(this.recordTimingMetric(aw.visitStart),this.state=ax.started,this.adapter.visitStarted(this),this.delegate.visitStarted(this))}cancel(){this.state==ax.started&&(this.request&&this.request.cancel(),this.cancelRender(),this.state=ax.canceled)}complete(){this.state!=ax.started||(this.recordTimingMetric(aw.visitEnd),this.state=ax.completed,this.followRedirect(),this.followedRedirect||(this.adapter.visitCompleted(this),this.delegate.visitCompleted(this)))}fail(){this.state==ax.started&&(this.state=ax.failed,this.adapter.visitFailed(this))}changeHistory(){var a;if(!this.historyChanged&&this.updateHistory){let b=this.location.href===(null===(a=this.referrer)|| void 0===a?void 0:a.href)?"replace":this.action,c=z(b);this.history.update(c,this.location,this.restorationIdentifier),this.historyChanged=!0}}issueRequest(){this.hasPreloadedResponse()?this.simulateRequest():this.shouldIssueRequest()&&!this.request&&(this.request=new FetchRequest(this,at.get,this.location),this.request.perform())}simulateRequest(){this.response&&(this.startRequest(),this.recordResponse(),this.finishRequest())}startRequest(){this.recordTimingMetric(aw.requestStart),this.adapter.visitRequestStarted(this)}recordResponse(a=this.response){if(this.response=a,a){let{statusCode:b}=a;V(b)?this.adapter.visitRequestCompleted(this):this.adapter.visitRequestFailedWithStatusCode(this,b)}}finishRequest(){this.recordTimingMetric(aw.requestEnd),this.adapter.visitRequestFinished(this)}loadResponse(){if(this.response){let{statusCode:a,responseHTML:b}=this.response;this.render(async()=>{this.shouldCacheSnapshot&&this.cacheSnapshot(),this.view.renderPromise&&await this.view.renderPromise,V(a)&&null!=b?(await this.view.renderPage(PageSnapshot.fromHTMLString(b),!1,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),this.complete()):(await this.view.renderError(PageSnapshot.fromHTMLString(b),this),this.adapter.visitRendered(this),this.fail())})}}getCachedSnapshot(){let a=this.view.getCachedSnapshotForLocation(this.location)||this.getPreloadedSnapshot();if(a&&(!h(this.location)||a.hasAnchor(h(this.location)))&&("restore"==this.action||a.isPreviewable))return a}getPreloadedSnapshot(){if(this.snapshotHTML)return PageSnapshot.fromHTMLString(this.snapshotHTML)}hasCachedSnapshot(){return null!=this.getCachedSnapshot()}loadCachedSnapshot(){let a=this.getCachedSnapshot();if(a){let b=this.shouldIssueRequest();this.render(async()=>{this.cacheSnapshot(),this.isSamePage?this.adapter.visitRendered(this):(this.view.renderPromise&&await this.view.renderPromise,await this.view.renderPage(a,b,this.willRender,this),this.performScroll(),this.adapter.visitRendered(this),b||this.complete())})}}followRedirect(){var a;this.redirectedToLocation&&!this.followedRedirect&&(null===(a=this.response)|| void 0===a?void 0:a.redirected)&&(this.adapter.visitProposedToLocation(this.redirectedToLocation,{action:"replace",response:this.response}),this.followedRedirect=!0)}goToSamePageAnchor(){this.isSamePage&&this.render(async()=>{this.cacheSnapshot(),this.performScroll(),this.adapter.visitRendered(this)})}prepareHeadersForRequest(a,b){this.acceptsStreamResponse&&b.acceptResponseType(StreamMessage.contentType)}requestStarted(){this.startRequest()}requestPreventedHandlingResponse(a,b){}async requestSucceededWithResponse(a,b){let c=await b.responseHTML,{redirected:d,statusCode:e}=b;void 0==c?this.recordResponse({statusCode:ay.contentTypeMismatch,redirected:d}):(this.redirectedToLocation=b.redirected?b.location:void 0,this.recordResponse({statusCode:e,responseHTML:c,redirected:d}))}async requestFailedWithResponse(a,b){let c=await b.responseHTML,{redirected:d,statusCode:e}=b;void 0==c?this.recordResponse({statusCode:ay.contentTypeMismatch,redirected:d}):this.recordResponse({statusCode:e,responseHTML:c,redirected:d})}requestErrored(a,b){this.recordResponse({statusCode:ay.networkFailure,redirected:!1})}requestFinished(){this.finishRequest()}performScroll(){this.scrolled||this.view.forceReloaded||("restore"==this.action?this.scrollToRestoredPosition()||this.scrollToAnchor()||this.view.scrollToTop():this.scrollToAnchor()||this.view.scrollToTop(),this.isSamePage&&this.delegate.visitScrolledToSamePageLocation(this.view.lastRenderedLocation,this.location),this.scrolled=!0)}scrollToRestoredPosition(){let{scrollPosition:a}=this.restorationData;if(a)return this.view.scrollToPosition(a),!0}scrollToAnchor(){let a=h(this.location);if(null!=a)return this.view.scrollToAnchor(a),!0}recordTimingMetric(a){this.timingMetrics[a]=new Date().getTime()}getTimingMetrics(){return Object.assign({},this.timingMetrics)}getHistoryMethodForAction(a){switch(a){case"replace":return history.replaceState;case"advance":case"restore":return history.pushState}}hasPreloadedResponse(){return"object"==typeof this.response}shouldIssueRequest(){return!this.isSamePage&&("restore"==this.action?!this.hasCachedSnapshot():this.willRender)}cacheSnapshot(){this.snapshotCached||(this.view.cacheSnapshot(this.snapshot).then(a=>a&&this.visitCachedSnapshot(a)),this.snapshotCached=!0)}async render(a){this.cancelRender(),await new Promise(a=>{this.frame=requestAnimationFrame(()=>a())}),await a(),delete this.frame}cancelRender(){this.frame&&(cancelAnimationFrame(this.frame),delete this.frame)}}function V(a){return a>=200&&a<300}(ar=az||(az={}))[ar.initial=0]="initial",ar[ar.loading=1]="loading",ar[ar.interactive=2]="interactive",ar[ar.complete=3]="complete";class ErrorRenderer extends Renderer{static renderElement(a,b){let{documentElement:c,body:d}=document;c.replaceChild(b,d)}async render(){this.replaceHeadAndBody(),this.activateScriptElements()}replaceHeadAndBody(){let{documentElement:a,head:b}=document;a.replaceChild(this.newHead,b),this.renderElement(this.currentElement,this.newElement)}activateScriptElements(){for(let a of this.scriptElements){let b=a.parentNode;if(b){let c=n(a);b.replaceChild(c,a)}}}get newHead(){return this.newSnapshot.headSnapshot.element}get scriptElements(){return document.documentElement.querySelectorAll("script")}}class PageRenderer extends Renderer{static renderElement(a,b){document.body&&b instanceof HTMLBodyElement?document.body.replaceWith(b):document.documentElement.appendChild(b)}get shouldRender(){return this.newSnapshot.isVisitable&&this.trackedElementsAreIdentical}get reloadReason(){return this.newSnapshot.isVisitable?this.trackedElementsAreIdentical?void 0:{reason:"tracked_element_mismatch"}:{reason:"turbo_visit_control_is_reload"}}async prepareToRender(){await this.mergeHead()}async render(){this.willRender&&this.replaceBody()}finishRendering(){super.finishRendering(),this.isPreview||this.focusFirstAutofocusableElement()}get currentHeadSnapshot(){return this.currentSnapshot.headSnapshot}get newHeadSnapshot(){return this.newSnapshot.headSnapshot}get newElement(){return this.newSnapshot.element}async mergeHead(){let a=this.copyNewHeadStylesheetElements();this.copyNewHeadScriptElements(),this.removeCurrentHeadProvisionalElements(),this.copyNewHeadProvisionalElements(),await a}replaceBody(){this.preservingPermanentElements(()=>{this.activateNewBody(),this.assignNewBody()})}get trackedElementsAreIdentical(){return this.currentHeadSnapshot.trackedElementSignature==this.newHeadSnapshot.trackedElementSignature}async copyNewHeadStylesheetElements(){let a=[];for(let b of this.newHeadStylesheetElements)a.push(y(b)),document.head.appendChild(b);await Promise.all(a)}copyNewHeadScriptElements(){for(let a of this.newHeadScriptElements)document.head.appendChild(n(a))}removeCurrentHeadProvisionalElements(){for(let a of this.currentHeadProvisionalElements)document.head.removeChild(a)}copyNewHeadProvisionalElements(){for(let a of this.newHeadProvisionalElements)document.head.appendChild(a)}activateNewBody(){document.adoptNode(this.newElement),this.activateNewBodyScriptElements()}activateNewBodyScriptElements(){for(let a of this.newBodyScriptElements){let b=n(a);a.replaceWith(b)}}assignNewBody(){this.renderElement(this.currentElement,this.newElement)}get newHeadStylesheetElements(){return this.newHeadSnapshot.getStylesheetElementsNotInSnapshot(this.currentHeadSnapshot)}get newHeadScriptElements(){return this.newHeadSnapshot.getScriptElementsNotInSnapshot(this.currentHeadSnapshot)}get currentHeadProvisionalElements(){return this.currentHeadSnapshot.provisionalElements}get newHeadProvisionalElements(){return this.newHeadSnapshot.provisionalElements}get newBodyScriptElements(){return this.newElement.querySelectorAll("script")}}function W(a){Object.defineProperties(a,X)}let X={absoluteURL:{get(){return this.toString()}}},Y={after(){this.targetElements.forEach(a=>{var b;return null===(b=a.parentElement)|| void 0===b?void 0:b.insertBefore(this.templateContent,a.nextSibling)})},append(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(a=>a.append(this.templateContent))},before(){this.targetElements.forEach(a=>{var b;return null===(b=a.parentElement)|| void 0===b?void 0:b.insertBefore(this.templateContent,a)})},prepend(){this.removeDuplicateTargetChildren(),this.targetElements.forEach(a=>a.prepend(this.templateContent))},remove(){this.targetElements.forEach(a=>a.remove())},replace(){this.targetElements.forEach(a=>a.replaceWith(this.templateContent))},update(){this.targetElements.forEach(a=>a.replaceChildren(this.templateContent))}},Z=new class Session{constructor(){this.navigator=new class Navigator{constructor(a){this.delegate=a}proposeVisit(a,b={}){this.delegate.allowsVisitingLocationWithAction(a,b.action)&&(this.delegate.locationIsVisitable(a,this.view.snapshot.rootLocation)?this.delegate.visitProposedToLocation(a,b):window.location.href=a.toString())}startVisit(a,b,c={}){this.lastVisit=this.currentVisit,this.stop(),this.currentVisit=new Visit(this,g(a),b,Object.assign({referrer:this.location},c)),this.currentVisit.start()}submitForm(a,b){this.stop(),this.formSubmission=new FormSubmission(this,a,b,!0),this.formSubmission.start()}stop(){this.formSubmission&&(this.formSubmission.stop(),delete this.formSubmission),this.currentVisit&&(this.currentVisit.cancel(),delete this.currentVisit)}get adapter(){return this.delegate.adapter}get view(){return this.delegate.view}get history(){return this.delegate.history}formSubmissionStarted(a){"function"==typeof this.adapter.formSubmissionStarted&&this.adapter.formSubmissionStarted(a)}async formSubmissionSucceededWithResponse(a,b){if(a==this.formSubmission){let c=await b.responseHTML;if(c){let d=a.method==at.get;d||this.view.clearSnapshotCache();let{statusCode:e,redirected:f}=b,g=this.getActionForFormSubmission(a),h={action:g,shouldCacheSnapshot:d,response:{statusCode:e,responseHTML:c,redirected:f}};this.proposeVisit(b.location,h)}}}async formSubmissionFailedWithResponse(a,b){let c=await b.responseHTML;if(c){let d=PageSnapshot.fromHTMLString(c);b.serverError?await this.view.renderError(d,this.currentVisit):await this.view.renderPage(d,!1,!0,this.currentVisit),this.view.scrollToTop(),this.view.clearSnapshotCache()}}formSubmissionErrored(a,b){console.error(b)}formSubmissionFinished(a){"function"==typeof this.adapter.formSubmissionFinished&&this.adapter.formSubmissionFinished(a)}visitStarted(a){this.delegate.visitStarted(a)}visitCompleted(a){this.delegate.visitCompleted(a)}locationWithActionIsSamePage(a,b){var c;let d=h(a),e=(null===(c=this.lastVisit)|| void 0===c?void 0:c.location)||this.view.lastRenderedLocation,f=h(e);return"replace"!==b&&j(a)===j(e)&&("restore"===b&& void 0===d||null!=d&&d!==f)}visitScrolledToSamePageLocation(a,b){this.delegate.visitScrolledToSamePageLocation(a,b)}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}getActionForFormSubmission(a){let{formElement:b,submitter:c}=a,d=v("data-turbo-action",c,b);return m(d)?d:"advance"}}(this),this.history=new class History{constructor(a){this.restorationIdentifier=u(),this.restorationData={},this.started=!1,this.pageLoaded=!1,this.onPopState=a=>{if(this.shouldHandlePopState()){let{turbo:b}=a.state||{};if(b){this.location=new URL(window.location.href);let{restorationIdentifier:c}=b;this.restorationIdentifier=c,this.delegate.historyPoppedToLocationWithRestorationIdentifier(this.location,c)}}},this.onPageLoad=async a=>{await Promise.resolve(),this.pageLoaded=!0},this.delegate=a}start(){this.started||(addEventListener("popstate",this.onPopState,!1),addEventListener("load",this.onPageLoad,!1),this.started=!0,this.replace(new URL(window.location.href)))}stop(){this.started&&(removeEventListener("popstate",this.onPopState,!1),removeEventListener("load",this.onPageLoad,!1),this.started=!1)}push(a,b){this.update(history.pushState,a,b)}replace(a,b){this.update(history.replaceState,a,b)}update(a,b,c=u()){a.call(history,{turbo:{restorationIdentifier:c}},"",b.href),this.location=b,this.restorationIdentifier=c}getRestorationDataForIdentifier(a){return this.restorationData[a]||{}}updateRestorationData(a){let{restorationIdentifier:b}=this,c=this.restorationData[b];this.restorationData[b]=Object.assign(Object.assign({},c),a)}assumeControlOfScrollRestoration(){var a;this.previousScrollRestoration||(this.previousScrollRestoration=null!==(a=history.scrollRestoration)&& void 0!==a?a:"auto",history.scrollRestoration="manual")}relinquishControlOfScrollRestoration(){this.previousScrollRestoration&&(history.scrollRestoration=this.previousScrollRestoration,delete this.previousScrollRestoration)}shouldHandlePopState(){return this.pageIsLoaded()}pageIsLoaded(){return this.pageLoaded||"complete"==document.readyState}}(this),this.preloader=new class Preloader{constructor(a){this.selector="a[data-turbo-preload]",this.delegate=a}get snapshotCache(){return this.delegate.navigator.view.snapshotCache}start(){if("loading"===document.readyState)return document.addEventListener("DOMContentLoaded",()=>{this.preloadOnLoadLinksForView(document.body)});this.preloadOnLoadLinksForView(document.body)}preloadOnLoadLinksForView(a){for(let b of a.querySelectorAll(this.selector))this.preloadURL(b)}async preloadURL(a){let b=new URL(a.href);if(!this.snapshotCache.has(b))try{let c=await fetch(b.toString(),{headers:{"VND.PREFETCH":"true",Accept:"text/html"}}),d=await c.text(),e=PageSnapshot.fromHTMLString(d);this.snapshotCache.put(b,e)}catch(f){}}}(this),this.view=new class PageView extends View{constructor(){super(...arguments),this.snapshotCache=new class SnapshotCache{constructor(a){this.keys=[],this.snapshots={},this.size=a}has(a){return k(a) in this.snapshots}get(a){if(this.has(a)){let b=this.read(a);return this.touch(a),b}}put(a,b){return this.write(a,b),this.touch(a),b}clear(){this.snapshots={}}read(a){return this.snapshots[k(a)]}write(a,b){this.snapshots[k(a)]=b}touch(a){let b=k(a),c=this.keys.indexOf(b);c> -1&&this.keys.splice(c,1),this.keys.unshift(b),this.trim()}trim(){for(let a of this.keys.splice(this.size))delete this.snapshots[a]}}(10),this.lastRenderedLocation=new URL(location.href),this.forceReloaded=!1}renderPage(a,b=!1,c=!0,d){let e=new PageRenderer(this.snapshot,a,PageRenderer.renderElement,b,c);return e.shouldRender?null==d||d.changeHistory():this.forceReloaded=!0,this.render(e)}renderError(a,b){null==b||b.changeHistory();let c=new ErrorRenderer(this.snapshot,a,ErrorRenderer.renderElement,!1);return this.render(c)}clearSnapshotCache(){this.snapshotCache.clear()}async cacheSnapshot(a=this.snapshot){if(a.isCacheable){this.delegate.viewWillCacheSnapshot();let{lastRenderedLocation:b}=this;await new Promise(a=>setTimeout(()=>a(),0));let c=a.clone();return this.snapshotCache.put(b,c),c}}getCachedSnapshotForLocation(a){return this.snapshotCache.get(a)}get snapshot(){return PageSnapshot.fromElement(this.element)}}(this,document.documentElement),this.adapter=new class BrowserAdapter{constructor(a){this.progressBar=new ProgressBar,this.showProgressBar=()=>{this.progressBar.show()},this.session=a}visitProposedToLocation(a,b){this.navigator.startVisit(a,(null==b?void 0:b.restorationIdentifier)||u(),b)}visitStarted(a){this.location=a.location,a.loadCachedSnapshot(),a.issueRequest(),a.goToSamePageAnchor()}visitRequestStarted(a){this.progressBar.setValue(0),a.hasCachedSnapshot()||"restore"!=a.action?this.showVisitProgressBarAfterDelay():this.showProgressBar()}visitRequestCompleted(a){a.loadResponse()}visitRequestFailedWithStatusCode(a,b){switch(b){case ay.networkFailure:case ay.timeoutFailure:case ay.contentTypeMismatch:return this.reload({reason:"request_failed",context:{statusCode:b}});default:return a.loadResponse()}}visitRequestFinished(a){this.progressBar.setValue(1),this.hideVisitProgressBar()}visitCompleted(a){}pageInvalidated(a){this.reload(a)}visitFailed(a){}visitRendered(a){}formSubmissionStarted(a){this.progressBar.setValue(0),this.showFormProgressBarAfterDelay()}formSubmissionFinished(a){this.progressBar.setValue(1),this.hideFormProgressBar()}showVisitProgressBarAfterDelay(){this.visitProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay)}hideVisitProgressBar(){this.progressBar.hide(),null!=this.visitProgressBarTimeout&&(window.clearTimeout(this.visitProgressBarTimeout),delete this.visitProgressBarTimeout)}showFormProgressBarAfterDelay(){null==this.formProgressBarTimeout&&(this.formProgressBarTimeout=window.setTimeout(this.showProgressBar,this.session.progressBarDelay))}hideFormProgressBar(){this.progressBar.hide(),null!=this.formProgressBarTimeout&&(window.clearTimeout(this.formProgressBarTimeout),delete this.formProgressBarTimeout)}reload(a){p("turbo:reload",{detail:a}),this.location&&(window.location.href=this.location.toString())}get navigator(){return this.session.navigator}}(this),this.pageObserver=new class PageObserver{constructor(a){this.stage=az.initial,this.started=!1,this.interpretReadyState=()=>{let{readyState:a}=this;"interactive"==a?this.pageIsInteractive():"complete"==a&&this.pageIsComplete()},this.pageWillUnload=()=>{this.delegate.pageWillUnload()},this.delegate=a}start(){this.started||(this.stage==az.initial&&(this.stage=az.loading),document.addEventListener("readystatechange",this.interpretReadyState,!1),addEventListener("pagehide",this.pageWillUnload,!1),this.started=!0)}stop(){this.started&&(document.removeEventListener("readystatechange",this.interpretReadyState,!1),removeEventListener("pagehide",this.pageWillUnload,!1),this.started=!1)}pageIsInteractive(){this.stage==az.loading&&(this.stage=az.interactive,this.delegate.pageBecameInteractive())}pageIsComplete(){this.pageIsInteractive(),this.stage==az.interactive&&(this.stage=az.complete,this.delegate.pageLoaded())}get readyState(){return document.readyState}}(this),this.cacheObserver=new class CacheObserver{constructor(){this.started=!1,this.removeStaleElements=a=>{let b=[...document.querySelectorAll('[data-turbo-cache="false"]')];for(let c of b)c.remove()}}start(){this.started||(this.started=!0,addEventListener("turbo:before-cache",this.removeStaleElements,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-cache",this.removeStaleElements,!1))}},this.linkClickObserver=new LinkClickObserver(this,window),this.formSubmitObserver=new FormSubmitObserver(this,document),this.scrollObserver=new class ScrollObserver{constructor(a){this.started=!1,this.onScroll=()=>{this.updatePosition({x:window.pageXOffset,y:window.pageYOffset})},this.delegate=a}start(){this.started||(addEventListener("scroll",this.onScroll,!1),this.onScroll(),this.started=!0)}stop(){this.started&&(removeEventListener("scroll",this.onScroll,!1),this.started=!1)}updatePosition(a){this.delegate.scrollPositionChanged(a)}}(this),this.streamObserver=new class StreamObserver{constructor(a){this.sources=new Set,this.started=!1,this.inspectFetchResponse=a=>{let b=function a(b){var c;let d=null===(c=b.detail)|| void 0===c?void 0:c.fetchResponse;if(d instanceof FetchResponse)return d}(a);b&&function a(b){var c;let d=null!==(c=b.contentType)&& void 0!==c?c:"";return d.startsWith(StreamMessage.contentType)}(b)&&(a.preventDefault(),this.receiveMessageResponse(b))},this.receiveMessageEvent=a=>{this.started&&"string"==typeof a.data&&this.receiveMessageHTML(a.data)},this.delegate=a}start(){this.started||(this.started=!0,addEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}stop(){this.started&&(this.started=!1,removeEventListener("turbo:before-fetch-response",this.inspectFetchResponse,!1))}connectStreamSource(a){this.streamSourceIsConnected(a)||(this.sources.add(a),a.addEventListener("message",this.receiveMessageEvent,!1))}disconnectStreamSource(a){this.streamSourceIsConnected(a)&&(this.sources.delete(a),a.removeEventListener("message",this.receiveMessageEvent,!1))}streamSourceIsConnected(a){return this.sources.has(a)}async receiveMessageResponse(a){let b=await a.responseHTML;b&&this.receiveMessageHTML(b)}receiveMessageHTML(a){this.delegate.receivedMessageFromStream(StreamMessage.wrap(a))}}(this),this.formLinkClickObserver=new FormLinkClickObserver(this,document.documentElement),this.frameRedirector=new class FrameRedirector{constructor(a,b){this.session=a,this.element=b,this.linkClickObserver=new LinkClickObserver(this,b),this.formSubmitObserver=new FormSubmitObserver(this,b)}start(){this.linkClickObserver.start(),this.formSubmitObserver.start()}stop(){this.linkClickObserver.stop(),this.formSubmitObserver.stop()}willFollowLinkToLocation(a,b,c){return this.shouldRedirect(a)&&this.frameAllowsVisitingLocation(a,b,c)}followedLinkToLocation(a,b){let c=this.findFrameElement(a);c&&c.delegate.followedLinkToLocation(a,b)}willSubmitForm(a,b){return null==a.closest("turbo-frame")&&this.shouldSubmit(a,b)&&this.shouldRedirect(a,b)}formSubmitted(a,b){let c=this.findFrameElement(a,b);c&&c.delegate.formSubmitted(a,b)}frameAllowsVisitingLocation(a,{href:b},c){let d=p("turbo:click",{target:a,detail:{url:b,originalEvent:c},cancelable:!0});return!d.defaultPrevented}shouldSubmit(a,b){var c;let d=i(a,b),e=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),f=g(null!==(c=null==e?void 0:e.content)&& void 0!==c?c:"/");return this.shouldRedirect(a,b)&&this.session.locationIsVisitable(d,f)}shouldRedirect(a,b){let c=a instanceof HTMLFormElement?this.session.submissionIsNavigatable(a,b):this.session.elementIsNavigatable(a);if(!c)return!1;{let d=this.findFrameElement(a,b);return!!d&&d!=a.closest("turbo-frame")}}findFrameElement(a,b){let c=(null==b?void 0:b.getAttribute("data-turbo-frame"))||a.getAttribute("data-turbo-frame");if(c&&"_top"!=c){let d=this.element.querySelector(`#${c}:not([disabled])`);if(d instanceof FrameElement)return d}}}(this,document.documentElement),this.streamMessageRenderer=new class StreamMessageRenderer{render({fragment:a}){Bardo.preservingPermanentElements(this,function a(b){let c=F(document.documentElement),d={};for(let e of c){let{id:f}=e;for(let g of b.querySelectorAll("turbo-stream")){let h=E(g.templateElement.content,f);h&&(d[f]=[e,h])}}return d}(a),()=>document.documentElement.appendChild(a))}enteringBardo(a,b){b.replaceWith(a.cloneNode(!0))}leavingBardo(){}},this.drive=!0,this.enabled=!0,this.progressBarDelay=500,this.started=!1,this.formMode="on"}start(){this.started||(this.pageObserver.start(),this.cacheObserver.start(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start(),this.scrollObserver.start(),this.streamObserver.start(),this.frameRedirector.start(),this.history.start(),this.preloader.start(),this.started=!0,this.enabled=!0)}disable(){this.enabled=!1}stop(){this.started&&(this.pageObserver.stop(),this.cacheObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop(),this.scrollObserver.stop(),this.streamObserver.stop(),this.frameRedirector.stop(),this.history.stop(),this.started=!1)}registerAdapter(a){this.adapter=a}visit(a,b={}){let c=b.frame?document.getElementById(b.frame):null;c instanceof FrameElement?(c.src=a.toString(),c.loaded):this.navigator.proposeVisit(g(a),b)}connectStreamSource(a){this.streamObserver.connectStreamSource(a)}disconnectStreamSource(a){this.streamObserver.disconnectStreamSource(a)}renderStreamMessage(a){this.streamMessageRenderer.render(StreamMessage.wrap(a))}clearCache(){this.view.clearSnapshotCache()}isVisitable(a){var b,c,d;return!!(((c=b=a,(d=c).pathname.split("/").slice(1).slice(-1)[0]).match(/\.[^.]*$/)||[])[0]||"").match(/^(?:|\.(?:htm|html|xhtml|php))$/)}locationIsVisitable(a,b){return function(a,b){var c;let d=(c=b,l(c.origin+c.pathname));return a.href===g(d).href||a.href.startsWith(d)}(a,b)&&this.isVisitable(a)}setProgressBarDelay(a){this.progressBarDelay=a}setFormMode(a){this.formMode=a}get location(){return this.history.location}get restorationIdentifier(){return this.history.restorationIdentifier}historyPoppedToLocationWithRestorationIdentifier(a,b){this.enabled?this.navigator.startVisit(a,b,{action:"restore",historyChanged:!0}):this.adapter.pageInvalidated({reason:"turbo_disabled"})}scrollPositionChanged(a){this.history.updateRestorationData({scrollPosition:a})}willSubmitFormLinkToLocation(a,b){return this.elementIsNavigatable(a)&&this.locationIsVisitable(b,this.snapshot.rootLocation)}submittedFormLinkToLocation(){}willFollowLinkToLocation(a,b,c){return this.elementIsNavigatable(a)&&this.locationIsVisitable(b,this.snapshot.rootLocation)&&this.applicationAllowsFollowingLinkToLocation(a,b,c)}followedLinkToLocation(a,b){let c=this.getActionForLink(a),d=a.hasAttribute("data-turbo-stream");this.visit(b.href,{action:c,acceptsStreamResponse:d})}allowsVisitingLocationWithAction(a,b){return this.locationWithActionIsSamePage(a,b)||this.applicationAllowsVisitingLocation(a)}visitProposedToLocation(a,b){W(a),this.adapter.visitProposedToLocation(a,b)}visitStarted(a){a.acceptsStreamResponse||w(document.documentElement),W(a.location),a.silent||this.notifyApplicationAfterVisitingLocation(a.location,a.action)}visitCompleted(a){x(document.documentElement),this.notifyApplicationAfterPageLoad(a.getTimingMetrics())}locationWithActionIsSamePage(a,b){return this.navigator.locationWithActionIsSamePage(a,b)}visitScrolledToSamePageLocation(a,b){this.notifyApplicationAfterVisitingSamePageLocation(a,b)}willSubmitForm(a,b){let c=i(a,b);return this.submissionIsNavigatable(a,b)&&this.locationIsVisitable(g(c),this.snapshot.rootLocation)}formSubmitted(a,b){this.navigator.submitForm(a,b)}pageBecameInteractive(){this.view.lastRenderedLocation=this.location,this.notifyApplicationAfterPageLoad()}pageLoaded(){this.history.assumeControlOfScrollRestoration()}pageWillUnload(){this.history.relinquishControlOfScrollRestoration()}receivedMessageFromStream(a){this.renderStreamMessage(a)}viewWillCacheSnapshot(){var a;(null===(a=this.navigator.currentVisit)|| void 0===a?void 0:a.silent)||this.notifyApplicationBeforeCachingSnapshot()}allowsImmediateRender({element:a},b){let c=this.notifyApplicationBeforeRender(a,b),{defaultPrevented:d,detail:{render:e}}=c;return this.view.renderer&&e&&(this.view.renderer.renderElement=e),!d}viewRenderedSnapshot(a,b){this.view.lastRenderedLocation=this.history.location,this.notifyApplicationAfterRender()}preloadOnLoadLinksForView(a){this.preloader.preloadOnLoadLinksForView(a)}viewInvalidated(a){this.adapter.pageInvalidated(a)}frameLoaded(a){this.notifyApplicationAfterFrameLoad(a)}frameRendered(a,b){this.notifyApplicationAfterFrameRender(a,b)}applicationAllowsFollowingLinkToLocation(a,b,c){let d=this.notifyApplicationAfterClickingLinkToLocation(a,b,c);return!d.defaultPrevented}applicationAllowsVisitingLocation(a){let b=this.notifyApplicationBeforeVisitingLocation(a);return!b.defaultPrevented}notifyApplicationAfterClickingLinkToLocation(a,b,c){return p("turbo:click",{target:a,detail:{url:b.href,originalEvent:c},cancelable:!0})}notifyApplicationBeforeVisitingLocation(a){return p("turbo:before-visit",{detail:{url:a.href},cancelable:!0})}notifyApplicationAfterVisitingLocation(a,b){return p("turbo:visit",{detail:{url:a.href,action:b}})}notifyApplicationBeforeCachingSnapshot(){return p("turbo:before-cache")}notifyApplicationBeforeRender(a,b){return p("turbo:before-render",{detail:Object.assign({newBody:a},b),cancelable:!0})}notifyApplicationAfterRender(){return p("turbo:render")}notifyApplicationAfterPageLoad(a={}){return p("turbo:load",{detail:{url:this.location.href,timing:a}})}notifyApplicationAfterVisitingSamePageLocation(a,b){dispatchEvent(new HashChangeEvent("hashchange",{oldURL:a.toString(),newURL:b.toString()}))}notifyApplicationAfterFrameLoad(a){return p("turbo:frame-load",{target:a})}notifyApplicationAfterFrameRender(a,b){return p("turbo:frame-render",{detail:{fetchResponse:a},target:b,cancelable:!0})}submissionIsNavigatable(a,b){if("off"==this.formMode)return!1;{let c=!b||this.elementIsNavigatable(b);return"optin"==this.formMode?c&&null!=a.closest('[data-turbo="true"]'):c&&this.elementIsNavigatable(a)}}elementIsNavigatable(a){let b=a.closest("[data-turbo]"),c=a.closest("turbo-frame");return this.drive||c?!b||"false"!=b.getAttribute("data-turbo"):!!b&&"true"==b.getAttribute("data-turbo")}getActionForLink(a){let b=a.getAttribute("data-turbo-action");return m(b)?b:"advance"}get snapshot(){return this.view.snapshot}},$=new class Cache{constructor(a){this.session=a}clear(){this.session.clearCache()}resetCacheControl(){this.setCacheControl("")}exemptPageFromCache(){this.setCacheControl("no-cache")}exemptPageFromPreview(){this.setCacheControl("no-preview")}setCacheControl(a){var b,c;let d;b="turbo-cache-control",c=a,(d=A(b))||((d=document.createElement("meta")).setAttribute("name",b),document.head.appendChild(d)),d.setAttribute("content",c)}}(Z),{navigator:_}=Z;function aa(){Z.start()}function ab(a){Z.registerAdapter(a)}function ac(a,b){Z.visit(a,b)}function ad(a){Z.connectStreamSource(a)}function ae(a){Z.disconnectStreamSource(a)}function af(a){Z.renderStreamMessage(a)}function ag(){console.warn("Please replace `Turbo.clearCache()` with `Turbo.cache.clear()`. The top-level function is deprecated and will be removed in a future version of Turbo.`"),Z.clearCache()}function ah(a){Z.setProgressBarDelay(a)}function ai(a){FormSubmission.confirmMethod=a}function aj(a){Z.setFormMode(a)}var ak,al,am,an,ao,ap,aq,ar,as,at,au,av,aw,ax,ay,az,aA=Object.freeze({__proto__:null,navigator:_,session:Z,cache:$,PageRenderer:PageRenderer,PageSnapshot:PageSnapshot,FrameRenderer:FrameRenderer,start:aa,registerAdapter:ab,visit:ac,connectStreamSource:ad,disconnectStreamSource:ae,renderStreamMessage:af,clearCache:ag,setProgressBarDelay:ah,setConfirmMethod:ai,setFormMode:aj,StreamActions:Y});function aB(a){if(null!=a){let b=document.getElementById(a);if(b instanceof FrameElement)return b}}function aC(a,b){if(a){var c,d;let e=a.getAttribute("src");if(null!=e&&null!=b&&(c=e,d=b,g(c).href==g(d).href))throw Error(`Matching <turbo-frame id="${a.id}"> element has a source URL which references itself`);if(a.ownerDocument!==document&&(a=document.importNode(a,!0)),a instanceof FrameElement)return a.connectedCallback(),a.disconnectedCallback(),a}}class StreamElement extends HTMLElement{static async renderElement(a){await a.performAction()}async connectedCallback(){try{await this.render()}catch(a){console.error(a)}finally{this.disconnect()}}async render(){var a;return null!==(a=this.renderPromise)&& void 0!==a?a:this.renderPromise=(async()=>{let a=this.beforeRenderEvent;this.dispatchEvent(a)&&(await q(),await a.detail.render(this))})()}disconnect(){try{this.remove()}catch(a){}}removeDuplicateTargetChildren(){this.duplicateChildren.forEach(a=>a.remove())}get duplicateChildren(){var a;let b=this.targetElements.flatMap(a=>[...a.children]).filter(a=>!!a.id),c=[...(null===(a=this.templateContent)|| void 0===a?void 0:a.children)||[]].filter(a=>!!a.id).map(a=>a.id);return b.filter(a=>c.includes(a.id))}get performAction(){if(this.action){let a=Y[this.action];if(a)return a;this.raise("unknown action")}this.raise("action attribute is missing")}get targetElements(){return this.target?this.targetElementsById:this.targets?this.targetElementsByQuery:void this.raise("target or targets attribute is missing")}get templateContent(){return this.templateElement.content.cloneNode(!0)}get templateElement(){if(null===this.firstElementChild){let a=this.ownerDocument.createElement("template");return this.appendChild(a),a}if(this.firstElementChild instanceof HTMLTemplateElement)return this.firstElementChild;this.raise("first child element must be a <template> element")}get action(){return this.getAttribute("action")}get target(){return this.getAttribute("target")}get targets(){return this.getAttribute("targets")}raise(a){throw Error(`${this.description}: ${a}`)}get description(){var a,b;return null!==(b=(null!==(a=this.outerHTML.match(/<[^>]+>/))&& void 0!==a?a:[])[0])&& void 0!==b?b:"<turbo-stream>"}get beforeRenderEvent(){return new CustomEvent("turbo:before-stream-render",{bubbles:!0,cancelable:!0,detail:{newStream:this,render:StreamElement.renderElement}})}get targetElementsById(){var a;let b=null===(a=this.ownerDocument)|| void 0===a?void 0:a.getElementById(this.target);return null!==b?[b]:[]}get targetElementsByQuery(){var a;let b=null===(a=this.ownerDocument)|| void 0===a?void 0:a.querySelectorAll(this.targets);return 0!==b.length?Array.prototype.slice.call(b):[]}}class StreamSourceElement extends HTMLElement{constructor(){super(...arguments),this.streamSource=null}connectedCallback(){this.streamSource=this.src.match(/^ws{1,2}:/)?new WebSocket(this.src):new EventSource(this.src),ad(this.streamSource)}disconnectedCallback(){this.streamSource&&ae(this.streamSource)}get src(){return this.getAttribute("src")||""}}FrameElement.delegateConstructor=class FrameController{constructor(a){this.fetchResponseLoaded=a=>{},this.currentFetchRequest=null,this.resolveVisitPromise=()=>{},this.connected=!1,this.hasBeenLoaded=!1,this.ignoredAttributes=new Set,this.action=null,this.visitCachedSnapshot=({element:a})=>{let b=a.querySelector("#"+this.element.id);b&&this.previousFrameElement&&b.replaceChildren(...this.previousFrameElement.children),delete this.previousFrameElement},this.element=a,this.view=new class FrameView extends View{invalidate(){this.element.innerHTML=""}get snapshot(){return new Snapshot(this.element)}}(this,this.element),this.appearanceObserver=new class AppearanceObserver{constructor(a,b){this.started=!1,this.intersect=a=>{let b=a.slice(-1)[0];(null==b?void 0:b.isIntersecting)&&this.delegate.elementAppearedInViewport(this.element)},this.delegate=a,this.element=b,this.intersectionObserver=new IntersectionObserver(this.intersect)}start(){this.started||(this.started=!0,this.intersectionObserver.observe(this.element))}stop(){this.started&&(this.started=!1,this.intersectionObserver.unobserve(this.element))}}(this,this.element),this.formLinkClickObserver=new FormLinkClickObserver(this,this.element),this.linkClickObserver=new LinkClickObserver(this,this.element),this.restorationIdentifier=u(),this.formSubmitObserver=new FormSubmitObserver(this,this.element)}connect(){this.connected||(this.connected=!0,this.loadingStyle==as.lazy?this.appearanceObserver.start():this.loadSourceURL(),this.formLinkClickObserver.start(),this.linkClickObserver.start(),this.formSubmitObserver.start())}disconnect(){this.connected&&(this.connected=!1,this.appearanceObserver.stop(),this.formLinkClickObserver.stop(),this.linkClickObserver.stop(),this.formSubmitObserver.stop())}disabledChanged(){this.loadingStyle==as.eager&&this.loadSourceURL()}sourceURLChanged(){!this.isIgnoringChangesTo("src")&&(this.element.isConnected&&(this.complete=!1),(this.loadingStyle==as.eager||this.hasBeenLoaded)&&this.loadSourceURL())}sourceURLReloaded(){let{src:a}=this.element;return this.ignoringChangesToAttribute("complete",()=>{this.element.removeAttribute("complete")}),this.element.src=null,this.element.src=a,this.element.loaded}completeChanged(){this.isIgnoringChangesTo("complete")||this.loadSourceURL()}loadingStyleChanged(){this.loadingStyle==as.lazy?this.appearanceObserver.start():(this.appearanceObserver.stop(),this.loadSourceURL())}async loadSourceURL(){this.enabled&&this.isActive&&!this.complete&&this.sourceURL&&(this.element.loaded=this.visit(g(this.sourceURL)),this.appearanceObserver.stop(),await this.element.loaded,this.hasBeenLoaded=!0)}async loadResponse(a){(a.redirected||a.succeeded&&a.isHTML)&&(this.sourceURL=a.response.url);try{let b=await a.responseHTML;if(b){let{body:c}=r(b),d=await this.extractForeignFrameElement(c);if(d){let e=new Snapshot(d),f=new FrameRenderer(this,this.view.snapshot,e,FrameRenderer.renderElement,!1,!1);this.view.renderPromise&&await this.view.renderPromise,this.changeHistory(),await this.view.render(f),this.complete=!0,Z.frameRendered(a,this.element),Z.frameLoaded(this.element),this.fetchResponseLoaded(a)}else this.willHandleFrameMissingFromResponse(a)&&(console.warn(`A matching frame for #${this.element.id} was missing from the response, transforming into full-page Visit.`),this.visitResponse(a.response))}}catch(g){console.error(g),this.view.invalidate()}finally{this.fetchResponseLoaded=()=>{}}}elementAppearedInViewport(a){this.loadSourceURL()}willSubmitFormLinkToLocation(a){return a.closest("turbo-frame")==this.element&&this.shouldInterceptNavigation(a)}submittedFormLinkToLocation(a,b,c){let d=this.findFrameElement(a);d&&c.setAttribute("data-turbo-frame",d.id)}willFollowLinkToLocation(a,b,c){return this.shouldInterceptNavigation(a)&&this.frameAllowsVisitingLocation(a,b,c)}followedLinkToLocation(a,b){this.navigateFrame(a,b.href)}willSubmitForm(a,b){return a.closest("turbo-frame")==this.element&&this.shouldInterceptNavigation(a,b)}formSubmitted(a,b){this.formSubmission&&this.formSubmission.stop(),this.formSubmission=new FormSubmission(this,a,b);let{fetchRequest:c}=this.formSubmission;this.prepareHeadersForRequest(c.headers,c),this.formSubmission.start()}prepareHeadersForRequest(a,b){var c;a["Turbo-Frame"]=this.id,(null===(c=this.currentNavigationElement)|| void 0===c?void 0:c.hasAttribute("data-turbo-stream"))&&b.acceptResponseType(StreamMessage.contentType)}requestStarted(a){w(this.element)}requestPreventedHandlingResponse(a,b){this.resolveVisitPromise()}async requestSucceededWithResponse(a,b){await this.loadResponse(b),this.resolveVisitPromise()}async requestFailedWithResponse(a,b){console.error(b),await this.loadResponse(b),this.resolveVisitPromise()}requestErrored(a,b){console.error(b),this.resolveVisitPromise()}requestFinished(a){x(this.element)}formSubmissionStarted({formElement:a}){w(a,this.findFrameElement(a))}formSubmissionSucceededWithResponse(a,b){let c=this.findFrameElement(a.formElement,a.submitter);this.proposeVisitIfNavigatedWithAction(c,a.formElement,a.submitter),c.delegate.loadResponse(b)}formSubmissionFailedWithResponse(a,b){this.element.delegate.loadResponse(b)}formSubmissionErrored(a,b){console.error(b)}formSubmissionFinished({formElement:a}){x(a,this.findFrameElement(a))}allowsImmediateRender({element:a},b){let c=p("turbo:before-frame-render",{target:this.element,detail:Object.assign({newFrame:a},b),cancelable:!0}),{defaultPrevented:d,detail:{render:e}}=c;return this.view.renderer&&e&&(this.view.renderer.renderElement=e),!d}viewRenderedSnapshot(a,b){}preloadOnLoadLinksForView(a){Z.preloadOnLoadLinksForView(a)}viewInvalidated(){}willRenderFrame(a,b){this.previousFrameElement=a.cloneNode(!0)}async visit(a){var b;let c=new FetchRequest(this,at.get,a,new URLSearchParams,this.element);return null===(b=this.currentFetchRequest)|| void 0===b||b.cancel(),this.currentFetchRequest=c,new Promise(a=>{this.resolveVisitPromise=()=>{this.resolveVisitPromise=()=>{},this.currentFetchRequest=null,a()},c.perform()})}navigateFrame(a,b,c){let d=this.findFrameElement(a,c);this.pageSnapshot=PageSnapshot.fromElement(d).clone(),this.proposeVisitIfNavigatedWithAction(d,a,c),this.withCurrentNavigationElement(a,()=>{d.src=b})}proposeVisitIfNavigatedWithAction(a,b,c){if(this.action=function(...a){let b=v("data-turbo-action",...a);return m(b)?b:null}(c,b,a),this.frame=a,m(this.action)){let{visitCachedSnapshot:d}=a.delegate;a.delegate.fetchResponseLoaded=b=>{if(a.src){let{statusCode:c,redirected:e}=b,f=a.ownerDocument.documentElement.outerHTML,g={statusCode:c,redirected:e,responseHTML:f},h={response:g,visitCachedSnapshot:d,willRender:!1,updateHistory:!1,restorationIdentifier:this.restorationIdentifier,snapshot:this.pageSnapshot};this.action&&(h.action=this.action),Z.visit(a.src,h)}}}}changeHistory(){if(this.action&&this.frame){let a=z(this.action);Z.history.update(a,g(this.frame.src||""),this.restorationIdentifier)}}willHandleFrameMissingFromResponse(a){this.element.setAttribute("complete","");let b=a.response,c=async(a,b={})=>{a instanceof Response?this.visitResponse(a):Z.visit(a,b)},d=p("turbo:frame-missing",{target:this.element,detail:{response:b,visit:c},cancelable:!0});return!d.defaultPrevented}async visitResponse(a){let b=new FetchResponse(a),c=await b.responseHTML,{location:d,redirected:e,statusCode:f}=b;return Z.visit(d,{response:{redirected:e,statusCode:f,responseHTML:c}})}findFrameElement(a,b){var c;let d=v("data-turbo-frame",b,a)||this.element.getAttribute("target");return null!==(c=aB(d))&& void 0!==c?c:this.element}async extractForeignFrameElement(a){let b,c=CSS.escape(this.id);try{if(b=aC(a.querySelector(`turbo-frame#${c}`),this.sourceURL))return b;if(b=aC(a.querySelector(`turbo-frame[src][recurse~=${c}]`),this.sourceURL))return await b.loaded,await this.extractForeignFrameElement(b)}catch(d){return console.error(d),new FrameElement}return null}formActionIsVisitable(a,b){let c=i(a,b);return Z.locationIsVisitable(g(c),this.rootLocation)}shouldInterceptNavigation(a,b){let c=v("data-turbo-frame",b,a)||this.element.getAttribute("target");if(a instanceof HTMLFormElement&&!this.formActionIsVisitable(a,b)||!this.enabled||"_top"==c)return!1;if(c){let d=aB(c);if(d)return!d.disabled}return!!(Z.elementIsNavigatable(a)&&(!b||Z.elementIsNavigatable(b)))}get id(){return this.element.id}get enabled(){return!this.element.disabled}get sourceURL(){if(this.element.src)return this.element.src}set sourceURL(a){this.ignoringChangesToAttribute("src",()=>{this.element.src=null!=a?a:null})}get loadingStyle(){return this.element.loading}get isLoading(){return void 0!==this.formSubmission|| void 0!==this.resolveVisitPromise()}get complete(){return this.element.hasAttribute("complete")}set complete(a){this.ignoringChangesToAttribute("complete",()=>{a?this.element.setAttribute("complete",""):this.element.removeAttribute("complete")})}get isActive(){return this.element.isActive&&this.connected}get rootLocation(){var a;let b=this.element.ownerDocument.querySelector('meta[name="turbo-root"]'),c=null!==(a=null==b?void 0:b.content)&& void 0!==a?a:"/";return g(c)}frameAllowsVisitingLocation(a,{href:b},c){let d=p("turbo:click",{target:a,detail:{url:b,originalEvent:c},cancelable:!0});return!d.defaultPrevented}isIgnoringChangesTo(a){return this.ignoredAttributes.has(a)}ignoringChangesToAttribute(a,b){this.ignoredAttributes.add(a),b(),this.ignoredAttributes.delete(a)}withCurrentNavigationElement(a,b){this.currentNavigationElement=a,b(),delete this.currentNavigationElement}},void 0===customElements.get("turbo-frame")&&customElements.define("turbo-frame",FrameElement),void 0===customElements.get("turbo-stream")&&customElements.define("turbo-stream",StreamElement),void 0===customElements.get("turbo-stream-source")&&customElements.define("turbo-stream-source",StreamSourceElement),(()=>{let a=document.currentScript;if(a&&!a.hasAttribute("data-turbo-suppress-warning"))for(a=a.parentElement;a;){if(a==document.body)return console.warn(s`
        You are loading Turbo from a <script> element inside the <body> element. This is probably not what you meant to do!

        Load your applications JavaScript bundle inside the <head> element instead. <script> elements in <body> are evaluated with each page change.

        For more information, see: https://turbo.hotwired.dev/handbook/building#working-with-script-elements

        
        Suppress this warning by adding a "data-turbo-suppress-warning" attribute to: %s
      `,a.outerHTML);a=a.parentElement}})(),window.Turbo=aA,aa()}}])
//# sourceMappingURL=vendors-node_modules_manuelpuyol_turbo_dist_turbo_es2017-esm_js-5836df98cf02.js.map